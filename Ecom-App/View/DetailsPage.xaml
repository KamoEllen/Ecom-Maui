<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:ct="Ecom-App\Control\CustomBorder.cs"
             x:Class="Ecom_App.View.DetailsPage"
             NavigationPage.HasNavigationBar="False"
             Title="DetailsPage">

    <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
        <Image Aspect="AspectFill" Source="here.png"/>

        <Grid RowDefinitions="* , Auto">

            <Grid HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <VerticalStackLayout x:Name="sideView">
                    <VerticalStackLayout Spacing="5">
                    </VerticalStackLayout>

                    <!-- Image Collection View starts-->
                    
                    <Grid x:Name="imagesView" WidthRequest="80" VerticalOptions="Start" HorizontalOptions="End" Margin="0,0,20,0">
                        <CollectionView Margin="0,10" ItemsSource="{Binding ProductImages}"
                                        VerticalOptions="FillAndExpand">
                            <CollectionView.ItemTemplate>
                                <DataTemplate>
                                </DataTemplate>
                            </CollectionView.ItemTemplate>
                        </CollectionView>
                    </Grid>
                   

                    <!-- First Three Buttons Container -->
                    <Border BackgroundColor="White"
                            StrokeThickness="0"
                            Stroke="White"
                            StrokeShape="RoundRectangle 30"
                            Margin="0,50,20,0"
                            HorizontalOptions="End"
                            WidthRequest="95"
                            Padding="10">
                        <VerticalStackLayout Spacing="15" HorizontalOptions="Center">
                            <!--detailsBtn-->
                            <Grid x:Name="detailsBtn">
                                <Rectangle Fill="White" StrokeThickness="7" HeightRequest="75" WidthRequest="75"
                                           RadiusX="60" RadiusY="60" Opacity="0.97" Stroke="#B6B4A7"/>
                                <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center">
                                    <Border StrokeShape="Ellipse"
                                            WidthRequest="60"
                                            HeightRequest="60"
                                            Padding="0">
                                        <Image Source="image1.png"
                                               Aspect="Fill"
                                               WidthRequest="60"
                                               HeightRequest="60"/>
                                    </Border>
                                </VerticalStackLayout>
                            </Grid>

                            <Grid x:Name="specsBtn">
                                <Rectangle Fill="White" StrokeThickness="7" HeightRequest="75" WidthRequest="75"
                                           RadiusX="60" RadiusY="60" Opacity="0.97" Stroke="#DADADA"/>
                                <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center">
                                    <Border StrokeShape="Ellipse"
                                            WidthRequest="60"
                                            HeightRequest="60"
                                            Padding="0">
                                        <Image Source="image2.png"
                                               Aspect="Fill"
                                               WidthRequest="60"
                                               HeightRequest="60"/>
                                    </Border>
                                </VerticalStackLayout>
                            </Grid>

                            <Grid x:Name="reviewsBtn">
                                <Rectangle Fill="#E9E9E9" StrokeThickness="7" HeightRequest="75" WidthRequest="75"
                                           RadiusX="60" RadiusY="60" Opacity="0.97" Stroke="White" />
                                <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center">
                                    <Image Source="star.png" WidthRequest="15"/>
                                    <Label Text="+3" FontSize="32" TextColor="#787676" FontAttributes="Bold" Opacity="0.9"/>
                                </VerticalStackLayout>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>

                    <!-- Similar Button -->
                    <Grid x:Name="similarBtn" HorizontalOptions="End" Margin="0,15,20,0">
                        <Rectangle Fill="White" StrokeThickness="0" HeightRequest="100" WidthRequest="100"
                                   RadiusX="60" RadiusY="60" Opacity="0.97"/>
                        <VerticalStackLayout HorizontalOptions="Center" VerticalOptions="Center">
                            <Image Source="arrow.png" WidthRequest="15"/>
                            <Label Text="Details" FontSize="16" TextColor="#787676" FontAttributes="Bold" Opacity="0.9"/>
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Grid>

            <!-- Bottom Popup View -->
            <!--popView-->
            <Grid x:Name="popView" Grid.Row="1">
                <!-- nameView should be here holding  SelectedProduct.Name , SelectedProduct.Price-->
                <Border BackgroundColor="White" StrokeShape="RoundRectangle 35,35,0,0" StrokeThickness="0" Opacity="0.9" HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand"/>

                <Grid Padding="30" RowDefinitions="Auto,Auto,Auto">
                    <Label Grid.Row="0"
                           Text="{Binding SelectedProduct.Name}"
                           TextColor="Black"
                           FontSize="20"
                           Opacity="0.5"/>
                    <Label Grid.Row="1"
                           Text="{Binding SelectedProduct.Price, StringFormat='${0:###,###}'}"
                           TextColor="Black"
                           FontSize="28"
                           FontAttributes="Bold"/>

                    <Grid Grid.Row="2" ColumnDefinitions="Auto,*" Margin="0,20,0,0">
                        <!--buyBtn-->
                        <Button Grid.Column="0"
                                x:Name="buyBtn" 
                                Text="Add To Cart"
                                BackgroundColor="Black"
                                TextColor="White"
                                FontSize="20"
                                FontAttributes="Bold"
                                HeightRequest="50"
                                WidthRequest="200"
                                CornerRadius="8"
                                HorizontalOptions="Start"/>

                        <ImageButton Grid.Column="1"
                                     BackgroundColor="Transparent"
                                     Source="close.png"
                                     WidthRequest="40"
                                     HorizontalOptions="End"
                                     VerticalOptions="Center"
                                     Command="{Binding CloseCommand}"/>
                    </Grid>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</ContentPage>
